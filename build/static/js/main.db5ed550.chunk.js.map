{"version":3,"sources":["services/persons.js","components/Persons.js","components/PersonForm.js","components/Filter.js","components/errorMessage.js","App.js","index.js"],"names":["baseUrl","axios","get","then","res","data","newObject","post","catch","err","console","log","response","person","put","id","delete","Persons","persons","setPersons","map","i","key","name","number","onClick","personToDelete","answer","window","confirm","personService","filter","n","deletePerson","PersonForm","addName","handleNameChange","handleNumberChange","onSubmit","onChange","type","Filter","handleFilterChange","Notification","message","className","App","useState","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","errorMessage","setErrorMessage","useEffect","returnPeople","filtered","search","RegExp","event","target","value","preventDefault","nameObject","foundName","find","people","Name","setTimeout","returnedPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.db5ed550.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const req = axios.get(baseUrl)\r\n    return req.then(res => res.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n    const req = axios.post(baseUrl, newObject)\r\n    return req.then(res => res.data)\r\n    .catch(err => {\r\n        console.log(err.response.data)\r\n    })\r\n}\r\n\r\nconst update = (person) => {\r\n    const req = axios.put(`${baseUrl}/${person.id}`, person)\r\n    return req.then(res => res.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const req = axios.delete(`${baseUrl}/${id}`)\r\n    return req.then(res => res.data)\r\n}\r\n\r\nexport default { getAll, create, update, remove }","import React from 'react'\r\nimport personService from '../services/persons'\r\n\r\nconst Persons = ({ persons, setPersons }) => {\r\n  const deletePerson = personToDelete => {\r\n    const {id, name} = personToDelete\r\n    const answer = window.confirm(`Delete ${name}?`)\r\n    if (answer) {\r\n      personService\r\n      .remove(id)\r\n      .then(data => {\r\n        setPersons(persons.filter(n => n.id !== id))\r\n      })\r\n    }\r\n    console.log(answer, id)\r\n  }\r\nreturn (\r\n<div>\r\n  <ul>\r\n    {persons.map((person, i) => (\r\n      <li key={i}>{person.name} {person.number}\r\n      <button onClick={() => deletePerson(person)}>delete</button>\r\n      </li>\r\n    ))}\r\n  </ul>\r\n</div>\r\n)\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = ({addName, handleNameChange, handleNumberChange}) => {\r\n\r\nreturn (\r\n  <form onSubmit={addName}>\r\n    <div>\r\n          name: <input\r\n          onChange={handleNameChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          number: <input\r\n          onChange={handleNumberChange}\r\n          />\r\n        </div>\r\n        <div>\r\n        <button type='submit'>add</button>\r\n        </div>\r\n  </form>\r\n)\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Filter = ({handleFilterChange}) => {\r\nreturn (\r\n  <div>\r\n    filter by name:\r\n    <input onChange={handleFilterChange}/>\r\n  </div>\r\n)\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Notification = ({ message }) => {\r\nif (message === null) {\r\n  return null\r\n}\r\nreturn (\r\n  <div className='error'>\r\n    {message}\r\n  </div>\r\n)\r\n}\r\n\r\nexport default Notification;","import React, { useState, useEffect } from 'react'\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport personService from './services/persons'\r\nimport Notification from './components/errorMessage'\r\nconst App = () => {\r\n\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [newFilter, setNewFilter] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState(null)\r\n\r\n  const hook = () => {\r\n    personService\r\n    .getAll()\r\n    .then(returnPeople => {\r\n      console.log('rendered correctly')\r\n      setPersons(returnPeople)\r\n    })\r\n  }\r\n  useEffect(hook, [])\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    console.log('button clicked', event.target)\r\n    const nameObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    let foundName = persons.find(({ name }) => name === newName)\r\n    let foundNumber = persons.find(({ number }) => number === newNumber)\r\n    console.log(foundName)\r\n    if (foundName) {\r\n      const replace = window.confirm(`${foundName.name} is already added, replace the old number?`)\r\n      if (replace){\r\n        foundName.number = newNumber\r\n        personService\r\n      .update(foundName)\r\n      .then (people => {\r\n        console.log(people)\r\n        setPersons(persons.map(person => person.id !== people.id ? person : people))\r\n      })\r\n      .catch(err => {\r\n        setErrorMessage(`'${foundName.Name}' was already deleted from the server`)\r\n      })\r\n      setErrorMessage(`Added '${nameObject.name}'`)\r\n      setTimeout(() =>{\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n      }\r\n    } else {\r\n      personService\r\n      .create(nameObject)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson))\r\n      })\r\n      setErrorMessage(`Added '${nameObject.name}'`)\r\n      setTimeout(() =>{\r\n        setErrorMessage(null)\r\n      }, 5000)\r\n    }\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewFilter(event.target.value)\r\n  }\r\n\r\n  const filtered = persons.filter((person) => {\r\n      return person.name.search(new RegExp(newFilter, 'i')) >=0\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={errorMessage}/>\r\n      <Filter handleFilterChange={handleFilterChange} />\r\n\r\n      <h2>Add a new name/number</h2>\r\n\r\n      <PersonForm\r\n      handleNameChange={handleNameChange}\r\n      handleNumberChange={handleNumberChange}\r\n      addName={addName}\r\n      />\r\n\r\n      <h2>Numbers</h2>\r\n\r\n      <Persons persons={filtered} setPersons={setPersons}/>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css'\r\nReactDOM.render(\r\n<App />,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}